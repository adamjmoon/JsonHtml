<!doctype html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]>
<html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>
<html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>
<html class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
Remove this if you use the .htaccess -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>@ViewBag.Title</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!--  Mobile viewport optimized: j.mp/bplateviewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">

    <!-- CSS : implied media="all" -->

    <link rel="stylesheet" href="Views/C/js/TableTools-2.0.1/media/css/TableTools.css">
    <link rel="stylesheet" href="Views/C/js/DataTables-1.8.2/media/css/demo_page.css">
    <link rel="stylesheet" href="Views/C/js/DataTables-1.8.2/media/css/demo_table.css">
    <link rel="stylesheet" href="Views/C/js/DataTables-1.8.2/media/css/demo_table_jui.css">

    <link rel="stylesheet" href="Views/C/js/fileupload/fileuploader.css">
    <link rel="stylesheet" href="Views/C/css/jquery-ui/jquery-ui-1.8.16.custom.css">


    <script src="/Views/C/js/libs/LAB.min.js"></script>
    <script>
        // Edit to suit your needs.
        var ADAPT_CONFIG = {
            // Where is your CSS?
            path: '/Views/C/css/assets/',

            // false = Only run once, when page first loads.
            // true = Change on window resize and page tilt.
            dynamic: true,

            // First range entry is the minimum.
            // Last range entry is the maximum.
            // Separate ranges by "to" keyword.
            range: [
                '0px    to 760px  = mobile.min.css',
                '760px  to 980px  = 720.min.css',
                '980px  to 1280px = 960.min.css',
                '1280px to 1600px = 1200.min.css',
                '1600px to 1940px = 1560.min.css',
                '1940px to 2540px = 1920.min.css',
                '2540px           = 2520.min.css'
            ]
        };
    </script>
    <script src="/Views/C/js/libs/adapt.min.js"></script>


    <!-- Uncomment if you are specifically targeting less enabled mobile browsers
<link rel="stylesheet" media="handheld" href="@Url.Content("~/css/handheld.css?v=2")"> -->

    <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
    <script src="/Views/C/js/libs/modernizr-1.7.min.js"></script>


</head>

<body>
@RenderBody()
<section id="page">

    <article class="page type-page">

        <div id="container" style="width: 100%">

        </div>
    </article>
</section>
<!--! end of #container -->


<!-- Javascript at the bottom for fast page loading -->
<script>

    function done() {
        $(document).ready(function () {

            $("#container").buildForm("/json/tabs.json", null, init);

        });
    }

    function init() {
         $("#loading").hide();
         $("#tabs").hide();

        $.getJSON("/json/ServerList.json", null, function (data) {
            $("#serverList").fillSelect(data);
        });

        $.getJSON("/json/DBList.json", null, function (data) {
            $("#dbList").fillSelect(data);
        });
        $.getJSON("/Report/List", null, function (data) {
            $("#reportList").fillSelect(data);
        });


        // selection onchange
        $("#dbList").change(function () {
            SqlReportManager.Selected.DB = $("#dbList option:selected").text();
        });

        $("#serverList").change(function () {
            SqlReportManager.Selected.Server = $("#serverList option:selected").text();
        });

        $("#reportList").change(function () {
            SqlReportManager.Selected.Report = $("#reportList option:selected").text();
        });

        $("#filter").click(function () {
            SqlReportManager.Selected.WhereClause = $("#filter").text();
            SqlReportManager.LoadTable();
        });


        var pullReport = $("#pullReport").click(function () {
            $("#loading").fadeIn();
            $("#filter").val("");
            SqlReportManager.LoadTable();
            SqlReportManager.LoadSql();
            $("#tabs").delay(1000).fadeIn();

        });

        $("#reportTab").height(SqlReportManager.pageHeight);
        $("#sqlTab").height(SqlReportManager.pageHeight);
        $('#datatable-wrapper').width(SqlReportManager.windowWidth - 10);
        $('#sqlTextArea').width(SqlReportManager.windowWidth - 10).height(SqlReportManager.pageHeight - 100);

    }
    ;

    $LAB
            .script("https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js")
            .script("Views/C/js/DataTables-1.8.2/media/js/jquery.dataTables.js")
            .script("Views/C/jquery/js/jquery-ui-1.8.16.custom.min.js")
            .script("Views/C/js/JQuery-DataTables-ColumnFilter/media/js/jquery.dataTables.columnFilter.js")
            .script("Views/C/js/TableTools-2.0.1/media/js/ZeroClipboard.js")
            .script("Views/C/js/TableTools-2.0.1/media/js/TableTools.min.js")
            .script("Views/C/js/libs/jquery.dform-0.1.3.min.js")
            .script("Views/C/js/libs/jquery.fillSelect.js")
            .script("Views/C/js/libs/ColReorderWithResize.js")
            .script("Views/C/js/fileupload/fileuploader.js")
            .script("Views/C/js/mylibs/sqlReportManager.Module.js")
            .script("Views/C/js/mylibs/sqlReportManager.Table.js")
            .wait(done);

</script>


</body>
</html>