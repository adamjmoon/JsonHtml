<!doctype html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>@ViewBag.Title</title>
  <meta name="description" content="">
  <meta name="author" content="">

  <!--  Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Place favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- CSS : implied media="all" -->
  <link rel="stylesheet" href="@Url.Content("~/js/DataTables-1.8.2/media/css/demo_page.css")">
  <link rel="stylesheet" href="@Url.Content("~/js/DataTables-1.8.2/media/css/demo_table.css")">
  <link rel="stylesheet" href="@Url.Content("~/js/DataTables-1.8.2/media/css/demo_table_jui.css")">
  <link rel="stylesheet" href="@Url.Content("~/js/TableTools-2.0.1/media/css/TableTools.css")">
  <link rel="stylesheet" href="@Url.Content("~/js/TableTools-2.0.1/media/css/TableTools_JUI.css")">

  <link rel="stylesheet" href="@Url.Content("~/css/jquery-ui/jquery-ui-1.8.16.custom.css")">
  


  <script src="/js/libs/LAB.min.js"></script>
  <script>
      // Edit to suit your needs.
      var ADAPT_CONFIG = {
          // Where is your CSS?
          path: '/js/assets/',

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
                '0px    to 760px  = mobile.min.css',
                '760px  to 980px  = 720.min.css',
                '980px  to 1280px = 960.min.css',
                '1280px to 1600px = 1200.min.css',
                '1600px to 1940px = 1560.min.css',
                '1940px to 2540px = 1920.min.css',
                '2540px           = 2520.min.css'
            ]
      };
    </script>
    <script src="/js/adapt.min.js"></script>




  <!-- Uncomment if you are specifically targeting less enabled mobile browsers
  <link rel="stylesheet" media="handheld" href="@Url.Content("~/css/handheld.css?v=2")"> -->

  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="@Url.Content("~/js/libs/modernizr-1.7.min.js")"></script>


</head>

<body>
  <div id="container" class="container_12">
    <header>
    </header>

       @RenderBody()
       <div class="container_12" id="datatable-wrapper">

       </div>

    <footer>
    </footer>
  </div> <!--! end of #container -->


  <!-- Javascript at the bottom for fast page loading -->
  <script>

	function done() {
	    $(document).ready(function () {
           TableTools.DEFAULTS.aButtons = [ "copy", "csv", "xls", "pdf" ];

           $('#datatable-wrapper').append('<table cellpadding="0" cellspacing="0" border="0" class="display" id="example"></table>');
           var request = $.ajax(
                {
                    type: "POST",
                    url: "/Home/Report",
                    data: "",
                    dataType: "json",

                    success: function (json) {
                        json.bProcessing = true;
                        json.bStateSave = true;
                        json.bPaginate = true;
                        json.bFilter = true;
                        json.bSort = true;
                        json.bInfo = true;
                        json.bJQueryUI = true;
                        json.sPaginationType = "full_numbers";
                        json.sDom = 'T<"clear">lfrtip';
                        json.oTableTools = { sSwfPath : "js/TableTools-2.0.1/media/swf/copy_cvs_xls_pdf.swf"};
                        json.sScrollX = "100%";
                        json.bAutoWidth = true;
                        json.bLengthChange = true;
                        json.bScrollCollapse = false;

                        $('#example').dataTable(json);

                        var tFootHtml = "<tfoot><tr>";
                        for (i=0;i<json.aoColumns.length;i++)
                         {
                             tFootHtml += '<th>' + json.aoColumns[i].sTitle + '</th>';
                         }
                         tFootHtml += '</tr></tfoot>';
                        
                        $('#example').append(tFootHtml);

                        $('#example').dataTable().columnFilter();

                    }
                });

           request.fail(function (jqXHR, textStatus) {
               alert("Request failed: " + textStatus);
           });

//
//            var startPosition;
//            var endPosition;
//            $("#datatable-wrapper #example_wrapper #example tbody").sortable({
//            cursor: "move",
//            start:function(event, ui){
//              startPosition = ui.item.prevAll().length + 1;
//            },
//            update: function(event, ui) {
//              endPosition = ui.item.prevAll().length + 1;
//              alert('Start Position: ' + startPosition + ' End Position: ' + endPosition);
//                    /*var szUUIDList = "";
//                $('#myQueryList input[name=uuidWhatever]').each(function(i){
//                    szUUIDList = szUUIDList + ',' + $(this).val();
//                });
//                $.getJSON('/path/to/handler.cfc', {
//                    method:'YourMethod',
//                    returnFormat:'JSON',
//                    listUUIDs:szUUIDList
//                },
//                function(data){
//                    if(data.intSuccess == 1){
//                        alert('Display order updated');
//                    } else {
//                        alert('Sorry, there was a problem updating the display order.');
//                    }
//                });*/
//             }
//            });
//
//            $("#datatable-wrapper #example_wrapper #example tbody").addClass('ui-sortable');

        });
	}

	$LAB
	.script("https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js")
	.script("/js/DataTables-1.8.2/media/js/jquery.dataTables.js")
    .script("https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js")
    .script("/js/JQuery-DataTables-ColumnFilter/media/js/jquery.dataTables.columnFilter.js")
    .script("/js/TableTools-2.0.1/media/js/ZeroClipboard.js")
    .script("/js/TableTools-2.0.1/media/js/TableTools.min.js")
	.wait(done);

</script>
  <!-- end concatenated and minified scripts-->

  @RenderSection( "ScriptSection", false)
  <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]-->
    
</body>
</html>